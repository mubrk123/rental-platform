import{a as u,r as o,j as e,L as l}from"./index-CEqPDHAW.js";import{a as p}from"./index-ngrFHoWO.js";import{L as c}from"./loader-circle-4XyyydG9.js";import{C as y}from"./circle-check-DCvw2Jr7.js";import{M as b}from"./map-pin-xtlKUD_b.js";import{c as d}from"./createLucideIcon-CbM2lbut.js";import{M as j}from"./mail-keERjJS0.js";import{P as k}from"./phone-DfIUrlgA.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],N=d("corner-down-right",w);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],B=d("key-round",v),M=()=>{const{state:m}=u(),s=m?.booking||null,[t,x]=o.useState(s),[h,C]=o.useState(!s),[r,n]=o.useState(!0);return o.useEffect(()=>{if(!s?.vehicleId)return;const i=setInterval(async()=>{try{const{data:a}=await p.get(`https://rental-platform-0o9d.onrender.com/api/bookings/status/${s.vehicleId}`);a?.success&&a.booking?.status==="paid"&&(x(f=>({...f,...a.booking})),n(!1))}catch{console.warn("Waiting for backend verification...")}},2e3),g=setTimeout(()=>{clearInterval(i),n(!1)},1e4);return()=>{clearInterval(i),clearTimeout(g)}},[s]),h?e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen text-sky-700",children:[e.jsx(c,{className:"w-10 h-10 animate-spin mb-3"}),e.jsx("p",{children:"Preparing your confirmation..."})]}):t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-sky-100 flex flex-col items-center justify-center py-12 px-4 transition-all duration-500",children:[e.jsx("div",{className:`p-4 rounded-full mb-4 shadow-inner ${r?"bg-yellow-100":"bg-green-100"}`,children:r?e.jsx(c,{className:"w-16 h-16 text-yellow-500 animate-spin"}):e.jsx(y,{className:"w-16 h-16 text-green-600"})}),e.jsx("h2",{className:"text-3xl font-extrabold text-[#0A3D62] mb-2",children:r?"Finalizing Your Booking...":`Thank You, ${t.name}!`}),e.jsx("p",{className:"text-gray-600 mb-8 text-center",children:r?"Please wait a few seconds while we confirm your payment and documents.":"Your Bangalore adventure is confirmed! Get ready to ride."}),e.jsxs("div",{className:"bg-white shadow-lg rounded-2xl p-6 w-full max-w-lg border border-blue-100 relative",children:[e.jsx("div",{className:"w-full h-40 rounded-lg overflow-hidden bg-gray-50 mb-4",children:e.jsx("img",{src:t.vehicleImage||"https://placehold.co/400x200?text=Your+Ride+is+Ready",alt:"Booked Bike",className:"w-full h-full object-contain",loading:"lazy",decoding:"async"})}),e.jsx("h3",{className:"text-2xl font-semibold text-[#0A3D62] mb-1",children:t.vehicleName||"Your Selected Bike"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Booking Reference:"," ",e.jsx("span",{className:"font-mono text-gray-700",children:t.vehicleId})]}),e.jsxs("div",{className:"space-y-2 text-gray-700",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(b,{className:"w-5 h-5 text-sky-600 mr-2"}),e.jsx("strong",{children:"Location:"})," ",t.city]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 text-sky-600 mr-2"}),e.jsx("strong",{children:"Pickup:"})," ",t.pickupDate]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(N,{className:"w-5 h-5 text-sky-600 mr-2"}),e.jsx("strong",{children:"Dropoff:"})," ",t.dropoffDate]})]}),e.jsxs("div",{className:"mt-5 border-t pt-4 text-sm text-gray-600",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 text-blue-500 mr-2"}),"Confirmation sent to ",e.jsxs("strong",{children:[" ",t.email]})]}),e.jsxs("p",{className:"flex items-center mt-1",children:[e.jsx(k,{className:"w-4 h-4 text-blue-500 mr-2"}),"WhatsApp confirmation sent to"," ",e.jsxs("strong",{children:[" ",t.phoneNumber]})]})]}),e.jsx("div",{className:"mt-6 rounded-lg overflow-hidden shadow-md border",children:e.jsx("iframe",{title:"pickup-map",width:"100%",height:"200",style:{border:0},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps?q=${encodeURIComponent(t.city)}&output=embed`})}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[e.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.city)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-[#0A3D62] text-white text-center py-2 rounded-lg font-semibold hover:bg-sky-700 transition",children:"Get Directions to Pickup"}),e.jsx("button",{onClick:()=>alert("This will add the booking to Google Calendar (coming soon!)"),className:"flex-1 bg-gray-100 text-gray-800 text-center py-2 rounded-lg font-semibold hover:bg-gray-200 transition",children:"Add to Calendar"})]}),e.jsx(l,{to:"/vehicles",state:{refresh:!0},className:"mt-4 block text-center border border-[#0A3D62] text-[#0A3D62] py-2 rounded-lg font-medium hover:bg-sky-50 transition",children:"Back to Vehicles"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-6 text-center",children:["Need help or modify your booking? ",e.jsx("br",{}),"Call us at ",e.jsx("strong",{children:"+91 98765 43210"})," or reply to your confirmation email."]})]})]}):e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen",children:[e.jsx("p",{className:"text-gray-600",children:"No booking details found."}),e.jsx(l,{to:"/",className:"mt-4 bg-[#0A3D62] text-white px-5 py-2 rounded-lg shadow hover:bg-sky-700 transition",children:"Back to Home"})]})};export{M as default};
