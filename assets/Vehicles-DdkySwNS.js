import{j as e,r as i,a as w,u as k}from"./index-BmsZvNz7.js";import{a as v}from"./index-ngrFHoWO.js";import{L}from"./logo-yeSaluxs.js";import{u as C}from"./useLazyImage-Ci2d8R7-.js";import{M as D}from"./map-pin-B8koDevy.js";import{G as B}from"./gauge-DJEAuycs.js";import{L as P}from"./loader-circle-CbaeQeTM.js";import"./createLucideIcon-BvR8Tt28.js";const A=({vehicle:s,city:o,pickupDate:m,dropoffDate:n,navigate:a})=>{const{visible:x,ref:r}=C(),h=s.images?.[0]||"https://placehold.co/400x200?text=No+Image";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-200 border border-sky-100",children:[e.jsxs("div",{className:"relative",children:[x?e.jsx("img",{ref:r,src:h,alt:s.modelName,loading:"lazy",className:"w-full h-44 object-contain p-3 transition-opacity duration-700 opacity-100"}):e.jsx("div",{ref:r,className:"w-full h-44 bg-sky-50 animate-pulse rounded-lg p-3"}),s.availableCount===0&&e.jsx("span",{className:"absolute top-3 right-3 bg-red-600 text-white text-xs px-3 py-1 rounded-full",children:"Not Available"})]}),e.jsxs("div",{className:"p-4 border-t border-sky-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#0F172A]",children:s.modelName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.brand," â€¢ ",s.type]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available:"," ",e.jsx("span",{className:`font-bold ${s.availableCount>0?"text-green-600":"text-red-500"}`,children:s.availableCount})," ","/ ",s.totalQuantity]}),e.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm text-gray-600",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-1 text-sky-600"}),s.location?.city||o]}),e.jsxs("p",{className:"font-bold text-sky-700",children:["â‚¹",s.rentPerDay," / day"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 flex items-center justify-between",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(B,{className:"w-4 h-4 mr-1 text-sky-500"}),s.kmLimitPerDay?`${s.kmLimitPerDay} km/day limit`:"150 km/day limit"]})}),e.jsx("button",{disabled:s.availableCount===0,onClick:()=>a(`/booking/${s._id}?city=${o}&pickupDate=${m}&dropoffDate=${n}`,{state:{vehicleName:s.modelName,vehicleImage:s.images?.[0]}}),className:`w-full mt-4 py-2 font-semibold rounded-md transition ${s.availableCount===0?"bg-gray-400 cursor-not-allowed text-white":"bg-sky-600 text-white hover:bg-sky-700"}`,children:s.availableCount===0?"Not Available":"Book Now"})]})]})},M=()=>{const[s,o]=i.useState([]),[m,n]=i.useState(!0),[a,x]=i.useState({type:"",brand:"",sortBy:""}),r=w(),h=k(),l=new URLSearchParams(r.search),c=l.get("city")||"Bangalore",u=l.get("pickupDate")||"27 Oct 2025",f=l.get("dropoffDate")||"29 Oct 2025",b=l.get("pickupTime")||"9:00 AM",j=l.get("dropoffTime")||"10:00 AM",g=async()=>{n(!0);try{const t=await v.get(`https://rental-platform-0o9d.onrender.com/api/vehicles?city=${c}`);o(t.data||[])}catch(t){console.error("Error fetching vehicles:",t)}finally{n(!1)}};i.useEffect(()=>{g()},[c]),i.useEffect(()=>{r.state?.refresh&&g()},[r.state]);const p=(t,d)=>x(N=>({...N,[t]:d})),y=s.filter(t=>!(a.type&&t.type!==a.type||a.brand&&t.brand!==a.brand)).sort((t,d)=>a.sortBy==="priceLow"?t.rentPerDay-d.rentPerDay:a.sortBy==="priceHigh"?d.rentPerDay-t.rentPerDay:0);return m?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white text-sky-600",children:[e.jsx(P,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{className:"ml-2 font-medium",children:"Loading vehicles..."})]}):e.jsxs("div",{className:"min-h-screen bg-[#F0F9FF]",children:[e.jsx("header",{className:"bg-gradient-to-r from-sky-700 to-sky-500 text-white py-5 shadow-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:L,alt:"NewBikeWorld Logo",className:"w-12 h-12 rounded-full shadow-md",loading:"lazy"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["NewBike",e.jsx("span",{className:"text-sky-300",children:"World"})]}),e.jsx("p",{className:"text-sm text-sky-100 italic",children:"Your Journey, Our Bikes ðŸš²"})]})]}),e.jsxs("div",{className:"hidden md:block text-right",children:[e.jsxs("p",{className:"text-sm",children:["Showing results for"," ",e.jsx("span",{className:"font-semibold text-sky-200",children:c})]}),e.jsxs("p",{className:"text-xs text-sky-100",children:[u," ",b," â†’ ",f," ",j]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col lg:flex-row gap-8 py-10 px-6",children:[e.jsxs("aside",{className:"w-full lg:w-1/4 bg-white rounded-2xl shadow-md p-6 border border-sky-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-sky-700 mb-4",children:"ðŸ” Filter Your Ride"}),e.jsxs("div",{className:"space-y-5 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Vehicle Type"}),e.jsxs("select",{onChange:t=>p("type",t.target.value),className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"bike",children:"Bike"}),e.jsx("option",{value:"scooter",children:"Scooter"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Brand"}),e.jsxs("select",{onChange:t=>p("brand",t.target.value),className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Brands"}),e.jsx("option",{value:"Hero",children:"Hero"}),e.jsx("option",{value:"Yamaha",children:"Yamaha"}),e.jsx("option",{value:"Honda",children:"Honda"}),e.jsx("option",{value:"Royal Enfield",children:"Royal Enfield"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Sort by"}),e.jsxs("select",{onChange:t=>p("sortBy",t.target.value),className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"Relevance"}),e.jsx("option",{value:"priceLow",children:"Price: Low â†’ High"}),e.jsx("option",{value:"priceHigh",children:"Price: High â†’ Low"})]})]})]})]}),e.jsxs("main",{className:"w-full lg:w-3/4",children:[e.jsx("div",{className:"flex justify-between items-center bg-white rounded-xl shadow-sm p-4 border border-sky-100 mb-6",children:e.jsx("h3",{className:"text-lg font-semibold text-[#0F172A]",children:"Available Vehicles"})}),y.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No vehicles available for the selected filters."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map(t=>e.jsx(A,{vehicle:t,city:c,pickupDate:u,dropoffDate:f,navigate:h},t._id))})]})]})]})};export{M as default};
