import{r as l,j as e}from"./index-BwbtSFLM.js";import{a as v}from"./index-ngrFHoWO.js";import{C}from"./cloud-upload-gY06eqMg.js";import{I as D}from"./image-DkBYeWDE.js";import"./createLucideIcon-C3IlUNMj.js";const i=["All Locations","Lalbagh","NagaVara","Residency Road","Majestic (Gandhi Nagar)"],S=()=>{const[r,m]=l.useState({modelName:"",brand:"",rentPerDay:"",totalQuantity:"",city:i[0],type:"bike",kmLimitPerDay:""}),[y,c]=l.useState([]),[p,u]=l.useState([]),[g,h]=l.useState(!1),[x,o]=l.useState(""),s=a=>m({...r,[a.target.name]:a.target.value}),b=a=>{const t=Array.from(a.target.files);c(t),u(t.map(n=>URL.createObjectURL(n)))},f=async a=>{a.preventDefault(),h(!0),o("");try{const t=new FormData;Object.entries(r).forEach(([d,N])=>t.append(d,N)),y.forEach(d=>t.append("images",d));const n=localStorage.getItem("adminToken"),j=await v.post("https://rental-platform-0o9d.onrender.com/api/vehicles",t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}});o("✅ Vehicle uploaded successfully!"),m({modelName:"",brand:"",rentPerDay:"",totalQuantity:"",city:i[0],type:"bike",kmLimitPerDay:""}),c([]),u([]),console.log(j.data)}catch(t){console.error("Upload failed:",t),o("❌ Upload failed. Check console for details.")}finally{h(!1)}};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 max-w-2xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(C,{className:"w-6 h-6 mr-2 text-purple-600"})," Upload New Vehicle"]}),e.jsxs("form",{onSubmit:f,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("input",{name:"modelName",placeholder:"Model Name",value:r.modelName,onChange:s,className:"border rounded-lg p-2",required:!0}),e.jsx("input",{name:"brand",placeholder:"Brand",value:r.brand,onChange:s,className:"border rounded-lg p-2",required:!0}),e.jsx("input",{type:"number",name:"rentPerDay",placeholder:"Rent Per Day (₹)",value:r.rentPerDay,onChange:s,className:"border rounded-lg p-2",required:!0}),e.jsx("input",{type:"number",name:"totalQuantity",placeholder:"Total Quantity",value:r.totalQuantity,onChange:s,className:"border rounded-lg p-2",required:!0}),e.jsx("input",{type:"number",name:"kmLimitPerDay",placeholder:"KM Limit Per Day (e.g. 150)",value:r.kmLimitPerDay,onChange:s,className:"border rounded-lg p-2",required:!0}),e.jsx("select",{name:"city",value:r.city,onChange:s,className:"border rounded-lg p-2",children:i.map(a=>e.jsx("option",{children:a},a))}),e.jsxs("select",{name:"type",value:r.type,onChange:s,className:"border rounded-lg p-2",children:[e.jsx("option",{value:"bike",children:"bike"}),e.jsx("option",{value:"scooter",children:"scooter"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 mb-1 font-medium flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-2 text-purple-500"})," Upload Images"]}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:b})]}),p.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mt-2",children:p.map((a,t)=>e.jsx("img",{src:a,alt:`preview-${t}`,className:"w-full h-32 object-cover rounded-lg border"},t))}),e.jsx("button",{type:"submit",disabled:g,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:g?"Uploading...":"Upload Vehicle"}),x&&e.jsx("div",{className:"mt-4 p-2 text-center rounded bg-gray-50 text-sm font-medium",children:x})]})]})};export{S as default};
