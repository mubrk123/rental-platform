import{j as e,r as i}from"./index-Btv9iGSA.js";import{a as L}from"./index-ngrFHoWO.js";import{L as R}from"./logo-yeSaluxs.js";import{u as F}from"./useLazyImage-5a2QH3ti.js";import{E as A}from"./eye-BvP7EABo.js";import{L as E}from"./loader-circle-CL8W0R8M.js";import{X as M}from"./x-BXUXNG5K.js";import"./createLucideIcon-YgWYpsS-.js";const P=({bike:l,onView:o,onImageClick:x})=>{const{visible:h,ref:g}=F(),c=l.images?.[0]||"https://placehold.co/400x300?text=No+Image";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-200 border border-sky-100",children:[e.jsx("div",{className:"relative",children:h?e.jsx("img",{ref:g,src:c,alt:l.modelName,loading:"lazy",className:"w-full h-44 object-contain p-3 transition-opacity duration-700 opacity-100",onClick:()=>x(c)}):e.jsx("div",{ref:g,className:"w-full h-44 bg-sky-50 animate-pulse rounded-lg p-3"})}),e.jsxs("div",{className:"p-4 border-t border-sky-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-[#0F172A]",children:[l.brand," ",l.modelName]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Year: ",l.year||"â€”"]}),e.jsxs("p",{className:"text-sky-700 font-bold",children:["â‚¹",l.price]}),e.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>o(l),className:"bg-sky-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-sky-700 transition-all text-sm",children:[e.jsx(A,{className:"inline w-4 h-4 mr-1"})," View Details"]}),e.jsx("a",{href:"tel:6202673708",className:"border border-sky-300 text-sky-700 py-2 px-4 rounded-lg font-semibold hover:bg-sky-50 text-sm",children:"Contact"})]})]})]},l._id)},_=()=>{const[l,o]=i.useState([]),[x,h]=i.useState(!0),[g,c]=i.useState(null),[b,u]=i.useState(null),[t,k]=i.useState({brand:"",year:"",priceRange:""}),[w,v]=i.useState([]);i.useEffect(()=>{L.get("https://rental-platform-0o9d.onrender.com/api/sale-bikes").then(s=>{const a=s.data.bikes||[];o(a),S(a)}).catch(()=>o([])).finally(()=>h(!1))},[]);const S=s=>{const a=s.map(r=>Number(r.price)).filter(r=>!isNaN(r));if(a.length===0)return;const n=Math.min(...a),m=Math.max(...a),j=Math.ceil((m-n)/4),y=[];for(let r=0;r<4;r++){const f=n+r*j,N=r===3?m:f+j-1;y.push({label:`â‚¹${f.toLocaleString()} - â‚¹${N.toLocaleString()}`,min:f,max:N})}v(y)},p=(s,a)=>k(n=>({...n,[s]:a})),B=[...new Set(l.map(s=>s.brand).filter(Boolean))],C=[...new Set(l.map(s=>s.year).filter(Boolean))],d=l.filter(s=>{if(t.brand&&s.brand!==t.brand||t.year&&String(s.year)!==String(t.year))return!1;if(t.priceRange){const[a,n]=t.priceRange.split("-").map(m=>Number(m.trim()));if(s.price<a||s.price>n)return!1}return!0});return x?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white text-sky-600",children:[e.jsx(E,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{className:"ml-2 font-medium",children:"Loading sale bikes..."})]}):e.jsxs("div",{className:"min-h-screen bg-[#F0F9FF]",children:[e.jsx("header",{className:"bg-gradient-to-r from-sky-700 to-sky-500 text-white py-5 shadow-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:R,alt:"NewBikeWorld Logo",loading:"lazy",className:"w-12 h-12 rounded-full shadow-md"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["NewBike",e.jsx("span",{className:"text-sky-300",children:"World"})]}),e.jsx("p",{className:"text-sm text-sky-100 italic",children:"Your Journey, Our Bikes ðŸï¸"})]})]}),e.jsx("div",{className:"hidden md:block text-right",children:e.jsx("p",{className:"text-sm text-sky-100",children:"Explore all bikes available for sale"})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col lg:flex-row gap-8 py-10 px-6",children:[e.jsxs("aside",{className:"w-full lg:w-1/4 bg-white rounded-2xl shadow-md p-6 border border-sky-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-sky-700 mb-4",children:"ðŸ” Filter Bikes"}),e.jsxs("div",{className:"space-y-5 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Brand"}),e.jsxs("select",{onChange:s=>p("brand",s.target.value),value:t.brand,className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Brands"}),B.map(s=>e.jsx("option",{children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Year"}),e.jsxs("select",{onChange:s=>p("year",s.target.value),value:t.year,className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Years"}),C.sort((s,a)=>a-s).map(s=>e.jsx("option",{children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Price Range"}),e.jsxs("select",{onChange:s=>p("priceRange",s.target.value),value:t.priceRange,className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Prices"}),w.map((s,a)=>e.jsx("option",{value:`${s.min}-${s.max}`,children:s.label},a))]})]})]})]}),e.jsxs("main",{className:"w-full lg:w-3/4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white rounded-xl shadow-sm p-4 border border-sky-100 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#0F172A]",children:"Bikes for Sale"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[d.length," result",d.length!==1&&"s"]})]}),d.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No bikes match your selected filters."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(s=>e.jsx(P,{bike:s,onView:a=>c(a),onImageClick:a=>u(a)},s._id))})]})]}),b&&e.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>u(null),children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),u(null)},className:"absolute top-6 right-6 text-white",children:e.jsx(M,{className:"w-7 h-7"})}),e.jsx("img",{src:b,alt:"Zoomed",className:"max-h-[90vh] w-auto rounded-lg shadow-lg"})]})]})};export{_ as default};
