import{r as l,j as e}from"./index-BUXaKORS.js";import{a as f}from"./index-ngrFHoWO.js";import{C as y}from"./cloud-upload-DdGyW6zw.js";import{I as N}from"./image-Cf1mDX-s.js";import"./createLucideIcon-Q5V_cY2S.js";const U=()=>{const[s,i]=l.useState({modelName:"",brand:"",price:"",description:"",year:"",mileage:"",condition:"Used",city:"Koramangala, Bangalore"}),[d,c]=l.useState([]),[m,p]=l.useState([]),[u,g]=l.useState(!1),[x,o]=l.useState(""),t=r=>i({...s,[r.target.name]:r.target.value}),b=r=>{const a=Array.from(r.target.files).slice(0,10);c(a),p(a.map(h=>URL.createObjectURL(h)))},j=async r=>{if(r.preventDefault(),o(""),d.length<3){o("Please upload at least 3 images.");return}g(!0);try{const a=new FormData;Object.keys(s).forEach(n=>a.append(n,s[n])),d.forEach(n=>a.append("images",n)),(await f.post("https://rental-platform-0o9d.onrender.com/api/sale-bikes",a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("adminToken")}`}})).data?.success?(o("✅ Bike listed for sale successfully!"),i({modelName:"",brand:"",price:"",description:"",year:"",mileage:"",condition:"Used",city:"Koramangala, Bangalore"}),c([]),p([])):o("❌ Failed to create listing.")}catch(a){console.error("Upload sale bike error:",a),o("❌ Error uploading. Check console.")}finally{g(!1)}};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 max-w-3xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(y,{className:"w-6 h-6 mr-2 text-sky-600"})," Upload Bike For Sale"]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx("input",{name:"modelName",value:s.modelName,onChange:t,required:!0,placeholder:"Model name",className:"border rounded p-2"}),e.jsx("input",{name:"brand",value:s.brand,onChange:t,required:!0,placeholder:"Brand",className:"border rounded p-2"}),e.jsx("input",{name:"price",type:"number",value:s.price,onChange:t,required:!0,placeholder:"Price (₹)",className:"border rounded p-2"}),e.jsx("input",{name:"year",type:"number",value:s.year,onChange:t,placeholder:"Year",className:"border rounded p-2"}),e.jsx("input",{name:"mileage",value:s.mileage,onChange:t,placeholder:"Mileage (e.g., 15,000 km)",className:"border rounded p-2"}),e.jsxs("select",{name:"condition",value:s.condition,onChange:t,className:"border rounded p-2",children:[e.jsx("option",{children:"Used"}),e.jsx("option",{children:"Excellent"}),e.jsx("option",{children:"Good"}),e.jsx("option",{children:"Brand New"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:s.description,onChange:t,rows:3,className:"w-full border rounded p-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[e.jsx(N,{className:"w-4 h-4 mr-2 text-sky-600"})," Upload Images (min 3)"]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:b})]}),m.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-2",children:m.map((r,a)=>e.jsx("img",{src:r,alt:`preview-${a}`,className:"w-full h-28 object-cover rounded-md border"},a))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"submit",disabled:u,className:"bg-sky-600 text-white px-4 py-2 rounded hover:bg-sky-700",children:u?"Uploading...":"Create Listing"}),e.jsx("div",{className:"text-sm text-gray-600",children:x})]})]})]})};export{U as default};
