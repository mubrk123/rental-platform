import{j as e,r as o}from"./index-BUXaKORS.js";import{a as k}from"./index-ngrFHoWO.js";import{L}from"./logo-yeSaluxs.js";import{u as A}from"./useLazyImage-Ec3S82K4.js";import{E as I}from"./eye-DPVassz8.js";import{L as P}from"./loader-circle-B7CxhoPv.js";import{X as w}from"./x-TtlLZrZq.js";import"./createLucideIcon-Q5V_cY2S.js";const D=({bike:t,onView:d,onImageClick:h})=>{const{visible:g,ref:l}=A(),n=t.images?.[0]||"https://placehold.co/400x300?text=No+Image";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-200 border border-sky-100",children:[e.jsx("div",{className:"relative",children:g?e.jsx("img",{ref:l,src:n,alt:t.modelName,loading:"lazy",className:"w-full h-44 object-contain p-3 transition-opacity duration-700 opacity-100",onClick:()=>h(n)}):e.jsx("div",{ref:l,className:"w-full h-44 bg-sky-50 animate-pulse rounded-lg p-3"})}),e.jsxs("div",{className:"p-4 border-t border-sky-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-[#0F172A]",children:[t.brand," ",t.modelName]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Year: ",t.year||"â€”"]}),e.jsxs("p",{className:"text-sky-700 font-bold",children:["â‚¹",t.price]}),e.jsx("div",{className:"flex justify-center gap-3 mt-4",children:e.jsxs("button",{onClick:()=>d(t),className:"bg-sky-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-sky-700 transition-all text-sm",children:[e.jsx(I,{className:"inline w-4 h-4 mr-1"})," View Details"]})})]})]},t._id)},W=()=>{const[t,d]=o.useState([]),[h,g]=o.useState(!0),[l,n]=o.useState(null),[f,p]=o.useState(null),[r,v]=o.useState({brand:"",year:"",priceRange:""}),[C,S]=o.useState([]);o.useEffect(()=>{k.get("https://rental-platform-0o9d.onrender.com/api/sale-bikes").then(s=>{const a=s.data.bikes||[];d(a),B(a)}).catch(()=>d([])).finally(()=>g(!1))},[]);const B=s=>{const a=s.map(i=>Number(i.price)).filter(i=>!isNaN(i));if(a.length===0)return;const c=Math.min(...a),x=Math.max(...a),j=Math.ceil((x-c)/4),y=[];for(let i=0;i<4;i++){const b=c+i*j,N=i===3?x:b+j-1;y.push({label:`â‚¹${b.toLocaleString()} - â‚¹${N.toLocaleString()}`,min:b,max:N})}S(y)},u=(s,a)=>v(c=>({...c,[s]:a})),$=[...new Set(t.map(s=>s.brand).filter(Boolean))],F=[...new Set(t.map(s=>s.year).filter(Boolean))],m=t.filter(s=>{if(r.brand&&s.brand!==r.brand||r.year&&String(s.year)!==String(r.year))return!1;if(r.priceRange){const[a,c]=r.priceRange.split("-").map(x=>Number(x.trim()));if(s.price<a||s.price>c)return!1}return!0}),R=async s=>{try{const a=await k.get(`https://rental-platform-0o9d.onrender.com/api/sale-bikes/${s._id}`);n(a.data.bike)}catch(a){console.error("Failed to fetch bike details:",a),alert("Unable to load full details. Please try again later.")}};return h?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white text-sky-600",children:[e.jsx(P,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{className:"ml-2 font-medium",children:"Loading sale bikes..."})]}):e.jsxs("div",{className:"min-h-screen bg-[#F0F9FF]",children:[e.jsx("header",{className:"bg-gradient-to-r from-sky-700 to-sky-500 text-white py-5 shadow-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:L,alt:"NewBikeWorld Logo",loading:"lazy",className:"w-12 h-12 rounded-full shadow-md"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["NewBike",e.jsx("span",{className:"text-sky-300",children:"World"})]}),e.jsx("p",{className:"text-sm text-sky-100 italic",children:"Your Journey, Our Bikes ðŸï¸"})]})]}),e.jsx("div",{className:"hidden md:block text-right",children:e.jsx("p",{className:"text-sm text-sky-100",children:"Explore all bikes available for sale"})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col lg:flex-row gap-8 py-10 px-6",children:[e.jsxs("aside",{className:"w-full lg:w-1/4 bg-white rounded-2xl shadow-md p-6 border border-sky-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-sky-700 mb-4",children:"ðŸ” Filter Bikes"}),e.jsxs("div",{className:"space-y-5 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Brand"}),e.jsxs("select",{onChange:s=>u("brand",s.target.value),value:r.brand,className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Brands"}),$.map(s=>e.jsx("option",{children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Year"}),e.jsxs("select",{onChange:s=>u("year",s.target.value),value:r.year,className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Years"}),F.sort((s,a)=>a-s).map(s=>e.jsx("option",{children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-800 mb-1 block",children:"Price Range"}),e.jsxs("select",{onChange:s=>u("priceRange",s.target.value),value:r.priceRange,className:"w-full p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",children:"All Prices"}),C.map((s,a)=>e.jsx("option",{value:`${s.min}-${s.max}`,children:s.label},a))]})]})]})]}),e.jsxs("main",{className:"w-full lg:w-3/4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white rounded-xl shadow-sm p-4 border border-sky-100 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#0F172A]",children:"Bikes for Sale"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.length," result",m.length!==1&&"s"]})]}),m.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No bikes match your selected filters."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:m.map(s=>e.jsx(D,{bike:s,onView:R,onImageClick:a=>p(a)},s._id))})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[70] p-4 overflow-auto",onClick:()=>n(null),children:e.jsxs("div",{onClick:s=>s.stopPropagation(),className:"bg-white rounded-2xl max-w-2xl w-full p-6 shadow-xl relative text-gray-800",children:[e.jsx("button",{onClick:()=>n(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:e.jsx(w,{className:"w-6 h-6"})}),l.images?.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-4",children:l.images.map((s,a)=>e.jsx("img",{src:s,alt:`Bike ${a+1}`,className:"w-full h-36 object-cover rounded-md border border-gray-200"},a))}):e.jsx("div",{className:"w-full h-36 bg-gray-100 rounded-md mb-4 flex items-center justify-center text-gray-400",children:"No Images Available"}),e.jsxs("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:[l.brand," ",l.modelName]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-700 mb-3",children:["â‚¹",l.price?.toLocaleString()]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-y-2 text-sm mb-4",children:[l.year&&e.jsxs("p",{children:[e.jsx("b",{children:"Year:"})," ",l.year]}),l.owner&&e.jsxs("p",{children:[e.jsx("b",{children:"Owner:"})," ",l.owner]}),l.kmsDriven&&e.jsxs("p",{children:[e.jsx("b",{children:"Driven:"})," ",l.kmsDriven," km"]}),l.registrationNumber&&e.jsxs("p",{children:[e.jsx("b",{children:"Reg No:"})," ",l.registrationNumber]}),l.fuelType&&e.jsxs("p",{children:[e.jsx("b",{children:"Fuel Type:"})," ",l.fuelType]}),l.color&&e.jsxs("p",{children:[e.jsx("b",{children:"Color:"})," ",l.color]}),l.condition&&e.jsxs("p",{children:[e.jsx("b",{children:"Condition:"})," ",l.condition]})]}),l.description&&e.jsx("p",{className:"text-gray-600 mb-5 leading-relaxed",children:l.description}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsx("button",{onClick:()=>n(null),className:"flex-1 bg-sky-600 text-white py-2 rounded-lg font-semibold hover:bg-sky-700 transition-all",children:"Close"}),e.jsx("a",{href:`https://wa.me/919902255960?text=Hi!%20I'm%20interested%20in%20the%20${encodeURIComponent(`${l.year||""} ${l.brand} ${l.modelName} priced at â‚¹${l.price}`)}%20listed%20on%20NewBikeWorld.`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 transition-all text-center",children:"ðŸ“ž Contact Seller"})]}),e.jsxs("p",{className:"text-sm text-center text-gray-600 mt-3",children:["For quick inquiries, call us directly at"," ",e.jsx("a",{href:"tel:9902255960",className:"text-sky-700 font-semibold hover:underline",children:"9902255960"})]})]})}),f&&e.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[80] p-4",onClick:()=>p(null),children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),p(null)},className:"absolute top-6 right-6 text-white",children:e.jsx(w,{className:"w-7 h-7"})}),e.jsx("img",{src:f,alt:"Zoomed",className:"max-h-[90vh] w-auto rounded-lg shadow-lg"})]})]})};export{W as default};
